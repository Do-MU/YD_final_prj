<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.keumbi.prj.prd.mapper.DepositBaseMapper">
	<select id="selectDepId" parameterType="DepositBaseVO" resultType="int">
		SELECT DEP_ID
		FROM PRD_DEP_BASES
		WHERE DCLS_MONTH = #{dcls_month}
		AND FIN_CO_NO = #{fin_co_no}
		AND FIN_PRDT_CD = #{fin_prdt_cd}
	</select>

	<insert id="InsertDepBase" parameterType="DepositBaseVO">
		<selectKey keyProperty="id" resultType="int" order="BEFORE">
			SELECT 	MAX(ID)+1
			FROM 	PRD_DEP_BASES
		</selectKey>
		INSERT 	INTO PRD_DEP_BASES
		VALUES	( #{id}, #{dcls_month}, #{fin_co_no},
			   	  #{fin_prdt_cd}, #{kor_co_nm}, #{fin_prdt_nm},
			   	  #{join_way}, #{mtrt_int}, #{spcl_cnd},
			   	  #{join_deny}, #{join_member}, #{etc_note},
			   	  #{max_limit} )
	</insert>
	
	<insert id="InsertDepOpt" parameterType="DepositOptionVO">
		<selectKey keyProperty="id" resultType="int" order="BEFORE">
			SELECT 	DEP_ID
			FROM 	PRD_DEP_BASES
			WHERE 	DCLS_MONTH = #{dcls_month}
			AND 	FIN_CO_NO = #{fin_co_no}
			AND 	FIN_PRDT_CD = #{fin_prdt_cd}
		</selectKey>
		INSERT	INTO PRD_DEP_OPTIONS
		VALUES	( #{id}, #{intr_rate_type}, #{intr_rate_type_nm}, 
				  #{save_trm}, #{intr_rate}, #{intr_rate2} )
	</insert>
</mapper>