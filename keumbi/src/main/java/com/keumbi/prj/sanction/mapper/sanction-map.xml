<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.keumbi.prj.sanction.mapper.SanctionMapper">
	<!-- 제재 유저리스트 -->
	<select id="sanUser" resultType="SanctionVO">
		SELECT	S.USER_ID, C.VAL SANC_CODE, S.SDATE, S.EDATE, S.SANC_REASON
		FROM	SANCTIONS S, COMMON_CODE C
		WHERE	S.SANC_CODE = C.CODE
	</select>
	
	<insert id="sanInsert" parameterType="SanctionVO">
		INSERT INTO	SANCTIONS (SANC_NUM, USER_ID, SANC_CODE, SDATE, EDATE, SANC_REASON)
		VALUES		( (SELECT NVL(MAX(SANC_NUM), 1) + 1 FROM SANCTIONS)
					 , #{user_id}
					 , #{sanc_code}
					 , TO_CHAR(SYSDATE, 'YYYY-MM-DD')
					 , TO_CHAR(SYSDATE + #{edate}, 'YYYY-MM-DD')
					 , #{sanc_reason}
					)	
	</insert>
	
	
</mapper>