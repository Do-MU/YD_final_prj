<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.keumbi.prj.main.mapper.MainMapper">
	<select id="cntUser" resultType="MainVO">
		SELECT 
		    ROUND((SELECT COUNT(*) FROM USERS WHERE TRUNC(MONTHS_BETWEEN(SYSDATE, TO_DATE(BIRTH,'RRMMDD'))/12) BETWEEN 20 AND 29)/(SELECT COUNT(*) FROM USERS)*100,2) TWENTY,
		    ROUND((SELECT COUNT(*) FROM USERS WHERE TRUNC(MONTHS_BETWEEN(SYSDATE, TO_DATE(BIRTH,'RRMMDD'))/12) BETWEEN 30 AND 39)/(SELECT COUNT(*) FROM USERS)*100,2) THIRTY,
		    ROUND((SELECT COUNT(*) FROM USERS WHERE TRUNC(MONTHS_BETWEEN(SYSDATE, TO_DATE(BIRTH,'RRMMDD'))/12) BETWEEN 40 AND 49)/(SELECT COUNT(*) FROM USERS)*100,2) FOURTY,
		    ROUND((SELECT COUNT(*) FROM USERS WHERE TRUNC(MONTHS_BETWEEN(SYSDATE, TO_DATE(BIRTH,'RRMMDD'))/12) BETWEEN 50 AND 59)/(SELECT COUNT(*) FROM USERS)*100,2) FIFTY,
		    ROUND((SELECT COUNT(*) FROM USERS WHERE TRUNC(MONTHS_BETWEEN(SYSDATE, TO_DATE(BIRTH,'RRMMDD'))/12) BETWEEN 60 AND 100)/(SELECT COUNT(*) FROM USERS)*100,2) OVER
		FROM  DUAL
	</select>
	
	<select id="cntPrd" resultType="MainVO">
		SELECT 
			(SELECT COUNT(*) FROM PRD_CARDS) CNTCARD,
	        (SELECT COUNT(*) FROM PRD_CHALLS) CNTCHAL
		FROM DUAL
	</select>
	<select id="cntFinance" resultType="MainVO">
		SELECT SUM(DUAL.EACHTABLECOUNT) AS CNTFINANCE
		FROM 
		    (SELECT COUNT(*) AS EACHTABLECOUNT FROM PRD_DEP_BASES
		    UNION ALL
		    SELECT COUNT(*) AS EACHTABLECOUNT FROM PRD_SAV_BASES
		    UNION ALL
		    SELECT COUNT(*) AS EACHTABLECOUNT FROM PRD_LOAN_BASES) DUAL
	</select>
</mapper>